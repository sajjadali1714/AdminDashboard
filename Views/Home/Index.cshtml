@{
  ViewData["Title"] = "Home Page";
  var result = ViewBag.SalesDetail;
}
@using Newtonsoft.Json

<div class="pc-container">
  <div class="pc-content">
    <!-- [ Main Content ] start -->
    <div class="row">

      @* Orders Received *@
      <div class="col-md-6 col-xl-3">
        <div class="card bg-grd-primary order-card">
          <div class="card-body">
            <h6 class="text-white">Orders Received</h6>
            <h2 class="text-end text-white"><i class="feather icon-shopping-cart float-start"></i><span>@result.totalOrders</span>
            </h2>
            <p class="m-b-0">This Month<span class="float-end">@result.monthOrders</span></p>
          </div>
        </div>
      </div>

      @* Total Product Sales *@
      <div class="col-md-6 col-xl-3">
        <div class="card bg-grd-success order-card">
          <div class="card-body">
            <h6 class="text-white">Total Product Sales</h6>
            <h2 class="text-end text-white"><i class="feather icon-tag float-start"></i><span>@result.totalProductSales</span>
            </h2>
            <p class="m-b-0">This Month<span class="float-end">@result.monthlyProductSales</span></p>
          </div>
        </div>
      </div>
      
      @* Revenue *@
      <div class="col-md-6 col-xl-3">
        <div class="card bg-grd-warning order-card">
          <div class="card-body">
            <h6 class="text-white">Revenue</h6>
            <h2 class="text-end text-white"><i class="feather icon-repeat float-start"></i><span>$ @result.totalRevenue</span></h2>
            <p class="m-b-0">This Month<span class="float-end">$ @result.monthRevenue</span></p>
          </div>
        </div>
      </div>

      @* Total Profit *@
      <div class="col-md-6 col-xl-3">
        <div class="card bg-grd-danger order-card">
          <div class="card-body">
            <h6 class="text-white">Total Profit</h6>
            <h2 class="text-end text-white"><i class="feather icon-award float-start"></i><span>$ @result.totalProfit</span></h2>
            <p class="m-b-0">This Month<span class="float-end">$ @result.monthProfit</span></p>
          </div>
        </div>
      </div>

      @* Last Five Month Revenue 2023-2024 *@
      <div class="col-md-6 col-xl-7">
        <div class="card">
          <div class="card-header">
            <h5>Last Five Month Revenue 2023-2024</h5>
          </div>
          <div class="card-body">
            <canvas id="FiveMonthRevenueChart"></canvas>
          </div>
        </div>
      </div>

      @* Branch Sales Summary *@
      <div class="col-md-6 col-xl-5">
        <div class="card">
          <div class="card-header d-flex align-items-center justify-content-between py-3">
            <h5>Branch Sales Summary</h5>
            <div class="dropdown">
              <a class="avtar avtar-xs btn-link-secondary dropdown-toggle arrow-none" href="#" data-bs-toggle="dropdown"
                aria-haspopup="true" aria-expanded="false"><i class="material-icons-two-tone f-18">more_vert</i></a>
              <div class="dropdown-menu dropdown-menu-end">
                <a class="dropdown-item" href="#">View</a>
                <a class="dropdown-item" href="#">Edit</a>
              </div>
            </div>
          </div>
          <div class="card-body">
            <div class="media align-items-center">              
            </div>
            <canvas id="BranchSalesSummary" height="265px"></canvas>
          </div>
        </div>
        @* <div class="card">
        <div class="card-body">
        <div class="row">
        <div class="col-6">
        <div class="media align-items-center">
        <div class="avtar avtar-s bg-grd-primary flex-shrink-0">
        <i class="ph ph-money f-20 text-white"></i>
        </div>
        <div class="media-body ms-2">
        <p class="mb-0 text-muted">Total Profit</p>
        <h6 class="mb-0">$1,783</h6>
        </div>
        </div>
        </div>
        <div class="col-6">
        <div class="media align-items-center">
        <div class="avtar avtar-s bg-grd-success flex-shrink-0">
        <i class="ph ph-shopping-cart text-white f-20"></i>
        </div>
        <div class="media-body ms-2">
        <p class="mb-0 text-muted">Product Sold</p>
        <h6 class="mb-0">15,830</h6>
        </div>
        </div>
        </div>
        </div>
        </div>
        </div> *@
      </div>
      
      @* Daily Sales *@
      <div class="col-md-4 col-sm-6">
        <div class="card statistics-card-1">
          <div class="card-body">
            <img src="~/GradientTemplate/assets/images/widget/img-status-4.svg" alt="img" class="img-fluid img-bg">
            <div class="d-flex align-items-center justify-content-between mb-3 drp-div">
              <h6 class="mb-0">Daily Sales</h6>
              <div class="dropdown">
                <a class="avtar avtar-xs btn-link-secondary dropdown-toggle arrow-none" href="#"
                  data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i
                    class="material-icons-two-tone f-18">more_vert</i></a>
                <div class="dropdown-menu dropdown-menu-end">
                  <a class="dropdown-item" href="#">View</a>
                  <a class="dropdown-item" href="#">Edit</a>
                </div>
              </div>
            </div>
            <div class="d-flex align-items-center mt-3">
              <h3 class="f-w-300 d-flex align-items-center m-b-0">$ @result.dailySales</h3>
              @* <span class="badge bg-light-success ms-2">36%</span> *@
            </div>
            <p class="text-muted mb-2 text-sm mt-3">Daily Sales Details With Branchs</p>
            <div class="progress" style="height: 7px">
              <div class="progress-bar bg-brand-color-1" role="progressbar" style="width: 75%" aria-valuenow="75"
                aria-valuemin="0" aria-valuemax="100"></div>
            </div>
          </div>
        </div>
      </div>

      @* Monthly Sales *@
      <div class="col-md-4 col-sm-6">
        <div class="card statistics-card-1">
          <div class="card-body">
            <img src="~/GradientTemplate/assets/images/widget/img-status-5.svg" alt="img" class="img-fluid img-bg">
            <div class="d-flex align-items-center justify-content-between mb-3 drp-div">
              <h6 class="mb-0">Monthly Sales</h6>
              <div class="dropdown">
                <a class="avtar avtar-xs btn-link-secondary dropdown-toggle arrow-none" href="#"
                  data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i
                    class="material-icons-two-tone f-18">more_vert</i></a>
                <div class="dropdown-menu dropdown-menu-end">
                  <a class="dropdown-item" href="#">View</a>
                  <a class="dropdown-item" href="#">Edit</a>
                </div>
              </div>
            </div>
            <div class="d-flex align-items-center mt-3">
              <h3 class="f-w-300 d-flex align-items-center m-b-0">$@result.monthSales</h3>
              @* <span class="badge bg-light-primary ms-2">20%</span> *@
            </div>
            <p class="text-muted mb-2 text-sm mt-3">Monthly Sales Details With Branchs</p>
            <div class="progress" style="height: 7px">
              <div class="progress-bar bg-brand-color-3" role="progressbar" style="width: 75%" aria-valuenow="75"
                aria-valuemin="0" aria-valuemax="100"></div>
            </div>
          </div>
        </div>
      </div>

      @* Yearly Sales *@
      <div class="col-md-4 col-sm-12">
        <div class="card statistics-card-1 bg-brand-color-1">
          <div class="card-body">
            <img src="~/GradientTemplate/assets/images/widget/img-status-6.svg" alt="img" class="img-fluid img-bg">
            <div class="d-flex align-items-center justify-content-between mb-3 drp-div">
              <h6 class="mb-0 text-white">Yearly Sales</h6>
              <div class="dropdown">
                <a class="avtar avtar-xs btn-link-secondary bg-transparent text-white dropdown-toggle arrow-none"
                  href="#" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i
                    class="material-icons-two-tone bg-white f-18">more_vert</i></a>
                <div class="dropdown-menu dropdown-menu-end">
                  <a class="dropdown-item" href="#">View</a>
                  <a class="dropdown-item" href="#">Edit</a>
                </div>
              </div>
            </div>
            <div class="d-flex align-items-center mt-3">
              <h3 class="text-white f-w-300 d-flex align-items-center m-b-0">$@result.yearSales</h3>
            </div>
            <p class="text-white text-opacity-75 mb-2 text-sm mt-3">Yearly Sales Details With Branchs</p>
            <div class="progress" style="height: 7px">
              <div class="progress-bar bg-brand-color-3" role="progressbar" style="width: 75%" aria-valuenow="75"
                aria-valuemin="0" aria-valuemax="100"></div>
            </div>
          </div>
        </div>
      </div>
      
      @* Current Month Branch Sales Details *@
      <div class="col-sm-12">
        <div class="card table-card">
          <div class="card-header">
            <h5>Current Month Branch Sales Details</h5>
          </div>
          <div class="card-body p-0">
            <div class="table-responsive">
              <table class="table">
                <tr>
                  <th>Month</th>
                  <th>Branch</th>
                  <th>Total Sale</th>
                  <th>Maximum Sale</th>
                  <th>Minimum Sale</th>
                  <th>Average Sale</th>
                </tr>
                @foreach (var data in result.BranchSales) {
                  <tr>
                      <td>@data.orderMonth</td>
                      <td>@data.BranchName</td>
                      <td>@data.totalSale</td>
                      <td style="font-size:large;"><span class="badge bg-success">@data.maxSale</span></td>
                      <td style="font-size:large;"><span class="badge bg-danger">@data.minSale</span></td>
                      <td style="font-size:large;"><span class="badge bg-warning">@data.avgSale</span></td>
                  </tr>
                }                
              </table>
            </div>
          </div>
        </div>
      </div>      
    </div>
    <!-- [ Main Content ] end -->
  </div>
</div>


<script>
  window.onload = function () {    
    createMultiDataChart('FiveMonthRevenueChart',
      'bar',
      ['2023', '2024'],
      ['Jan', 'Feb', 'Mar', 'Apr', 'May'],
      [@Html.Raw(JsonConvert.SerializeObject(@result.pastFiveMonthSales)), @Html.Raw(JsonConvert.SerializeObject(@result.FiveMonthSales))],
      true
    );
    createChart('BranchSalesSummary', 'doughnut', 'Branch Sales Summary', ['California', 'Florida', 'Texas'], @Html.Raw(JsonConvert.SerializeObject(@result.branchSales)), false);
  };
</script>